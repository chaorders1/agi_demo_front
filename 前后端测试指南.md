# 🚀 前后端水印系统测试指南

## ✅ 系统状态检查

### 1. 后端API服务器
```bash
# 检查API健康状态
curl http://localhost:8000/api/health

# 预期输出：
{"status":"healthy","message":"Watermark API is running"}
```

### 2. 前端开发服务器
```bash
# 检查前端服务器状态
curl -s http://localhost:3001 -o /dev/null -w "%{http_code}"

# 预期输出：200
```

## 🎯 功能测试流程

### 第一步：访问前端应用
1. 打开浏览器访问：`http://localhost:3001`
2. 点击"进入水印工具"按钮，跳转到：`http://localhost:3001/watermark`

### 第二步：API连接测试
在水印工具页面顶部，点击：
- **健康检查测试** - 验证基础API连接
- **长度建议测试** - 验证API功能正常

### 第三步：水印功能测试

#### 🔒 添加水印测试
1. 选择一张图片文件（支持PNG、JPG、JPEG、BMP）
2. 输入水印文本（例如："测试水印内容2024"）
3. 系统会自动显示推荐长度
4. 点击"添加水印"按钮
5. **预期结果**：
   - 显示成功消息
   - 自动打开下载链接
   - 下载带水印的图片

#### 🔍 检测水印测试
1. 选择刚才下载的带水印图片
2. 切换到"检测水印"标签
3. 输入相同的水印文本
4. 点击"检测水印"按钮
5. **预期结果**：
   - 显示"✅ 检测到水印!"
   - 显示置信度百分比
   - 显示使用的长度信息

#### 🔍 扫描水印测试
1. 选择任意带水印的图片
2. 切换到"扫描水印"标签
3. 点击"扫描所有水印"按钮
4. **预期结果**：
   - 显示扫描完成信息
   - 显示发现的水印数量

## 🛠 调试和故障排除

### API连接问题
如果出现连接错误，检查：
1. 后端服务器是否运行：`curl http://localhost:8000/api/health`
2. 端口8000是否被占用
3. 浏览器控制台的网络请求详情

### CORS问题
如果出现跨域错误：
1. 确认后端已配置支持`localhost:3001`
2. 检查请求headers是否正确

### 文件上传问题
1. 确认文件类型为图片格式
2. 检查文件大小不超过10MB
3. 验证FormData格式正确

## 📊 性能测试建议

### 测试用例
1. **小文件测试**：100KB以下的PNG图片
2. **中等文件测试**：1-5MB的JPG图片
3. **大文件测试**：5-10MB的高清图片
4. **长文本测试**：50字符以上的水印文本
5. **短文本测试**：5字符以下的水印文本

### 预期响应时间
- **添加水印**：2-10秒（取决于图片大小）
- **检测水印**：1-5秒
- **扫描水印**：3-15秒（取决于max_length设置）
- **长度建议**：<1秒

## 🧠 智能功能演示

### 智能长度推断
1. 在添加水印时输入文本，观察自动长度推荐
2. 在检测水印时不填写长度，让系统智能推断
3. 比较手动设置长度 vs 智能推断的准确性

### 多长度尝试
检测功能会自动尝试多种长度组合，提高检测成功率。

## 🔗 重要链接

- **前端应用**：http://localhost:3001
- **水印工具**：http://localhost:3001/watermark
- **API文档**：http://localhost:8000/docs（实时交互测试）
- **健康检查**：http://localhost:8000/api/health

## 📱 浏览器兼容性

推荐使用：
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 🎉 成功标志

当你看到以下现象时，说明前后端已完全打通：

1. ✅ API连接测试全部通过
2. ✅ 能够成功添加水印并下载文件
3. ✅ 能够准确检测水印内容
4. ✅ 扫描功能正常工作
5. ✅ 浏览器控制台无错误信息
6. ✅ 网络请求状态码为200
7. ✅ 文件上传和下载流程顺畅

**恭喜！你已经成功实现了前后端水印系统的完整对接！** 🎊 